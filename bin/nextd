#!/bin/bash

function repeat() {
    number=$1
    shift
    for n in $(seq $number); do
      $@
    done
}

function _nextd {
    # nextd for cd next directory

    stack_len=$(echo $COMMAD_STACK | wc -l)
    if (( COMMAD_POINTER + 1 >= $stack_len )) ; then
        return
    fi

    (( COMMAD_POINTER += 1 ))
    (( i = 0 ))
    echo $COMMAD_STACK | while read line; do
        if [[ $i = $COMMAD_POINTER ]]; then
            cd $line
            return
        fi
        (( i += 1 ))
    done
}

[[ "$1" =~ ^[0-9]+$ ]] && n=$1 || n=0
repeat $n _nextd
